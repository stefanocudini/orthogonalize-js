<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title></title> 
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
	<link rel="stylesheet" href="/maps/leaflet/dist/leaflet.css" />
	<link rel="stylesheet" href="../style.css" />
</head>

<body>
<h3><a href="../"><big>â—„</big> Orthogonalize JS</a></h3>

<h4>Simple Example: <em>Orthogonalize Leaflet Polyline</em></h4>

<div id="map" style="position: absolute;top: 0;left: 0;right: 0;bottom: 0"></div>

<script src="../node_modules/jquery/dist/jquery.min.js"></script>
<script src="../node_modules/leaflet/dist/leaflet-src.js"></script>

<script src="../node_modules/underscore/underscore-min.js"></script>
<script src="../orthogonalize.src.js"></script>
<script>

	var map = L.map('map', {
		zoom: 17,
		center: [42.31981, 12.69832]
		//crs: L.CRS.Simple,
		//layers: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
	});

	$.getJSON('polyline.json', function(geojson) {

		var geoLayer = L.geoJson(geojson, {
			style: function() {
				return {color: '#00f', weight: 5}
			}
		});

		map.addLayer(geoLayer);//.fitBounds( geoLayer.getBounds() );

		console.log('original geojson',geojson);

		var geojsonOrto = Orthogonalize(geojson);

		console.log('Orthogonalized',geojsonOrto);

		var geoOrto = L.geoJson( geojsonOrto, {
			style: function() {
				return {color: '#f00', weight: 2, opacity: 1}
			}
		});
		

		map.addLayer(geoOrto);
	});

$.getJSON('polyline_ortho.json', function(geojson) {

		L.geoJson(geojson, {
			style: function() {
				return {color: '#f0f', weight: 5}
			}
		}).addTo(map);

		_.each(geojson.features[0].geometry.coordinates[0], function(l) {
			console.log('each',l)
			L.circleMarker(l.reverse(), {color: '#ff0', radius:6}).addTo(map);
		});
});

</script>

<div id="copy"><a href="http://labs.easyblog.it/">Labs</a> &bull; <a rel="author" href="http://labs.easyblog.it/stefano-cudini/">Stefano Cudini</a></div>
	
</body>
</html>